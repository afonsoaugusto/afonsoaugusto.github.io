<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>{{ page.title }} | {{ site.title }}</title>
    {% seo %}
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
  </head>
  <body>
    <header>
      <h1><a href="{{ '/' | relative_url }}">{{ site.title }}</a></h1>
    </header>

    <main style="display: flex; gap: 2rem; align-items: flex-start;">
      <!-- Sidebar com Table of Contents -->
      <aside id="toc" class="toc" style="flex: 0 0 250px;"></aside>

      <!-- Conteúdo do post -->
      <article class="post-content" style="flex: 1;">
        <h1>{{ page.title }}</h1>
        <p><small>{{ page.date | date: "%d %B %Y" }}</small></p>
        {{ content }}
      </article>
    </main>

    <footer>
      <p>&copy; {{ site.time | date: "%Y" }} {{ site.author.name | default: site.title }}</p>
    </footer>

    <!-- Script para gerar ToC -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const content = document.querySelector(".post-content");
        const toc = document.getElementById("toc");
        if (!content || !toc) return;

        const headings = content.querySelectorAll("h2, h3");
        if (headings.length === 0) return;

        let html = "<div style='padding: 1em; background: #f5f5f5; border-left: 3px solid #007acc'><strong>Índice</strong><ul>";
        headings.forEach(h => {
          const id = h.id || h.textContent.trim().toLowerCase().replace(/[^\w]+/g, "-");
          h.id = id;
          html += `<li style="margin-left:${h.tagName === 'H3' ? '1em' : '0'}"><a href="#${id}">${h.textContent}</a></li>`;
        });
        html += "</ul></div>";
        toc.innerHTML = html;
      });
    </script>
  </body>
</html>
